(function(i){"use strict";i.event.special.destroyed||(i.event.special.destroyed={remove:function(l){l.handler&&l.handler()}}),i.fn.extend({maxlength:function(l,u){var w=i("body"),y={showOnReady:!1,alwaysShow:!0,threshold:0,warningClass:"small form-text text-muted",limitReachedClass:"small form-text text-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom-right-inside",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,customMaxAttribute:null,allowOverMax:!1,zIndex:1099};i.isFunction(l)&&!u&&(u=l,l={}),l=i.extend(y,l);function o(a){var t=a.charCodeAt();return t?t<128?1:t<2048?2:3:0}function d(a){return a.split("").map(o).concat(0).reduce(function(t,e){return t+e})}function g(a){var t=a.val();l.twoCharLinebreak?t=t.replace(/\r(?!\n)|\n(?!\r)/g,`\r
`):t=t.replace(/(?:\r\n|\r|\n)/g,`
`);var e=0;return l.utf8?e=d(t):e=t.length,a.prop("type")==="file"&&a.val()!==""&&(e-=12),e}function C(a,t){var e=a.val();if(l.twoCharLinebreak&&(e=e.replace(/\r(?!\n)|\n(?!\r)/g,`\r
`),e[e.length-1]===`
`&&(t-=e.length%2)),l.utf8){for(var f=e.split("").map(o),s=0,n=d(e)-t;s<n;s+=f.pop());t-=t-f.length}a.val(e.substr(0,t))}function x(a,t,e){var f=!0;return!l.alwaysShow&&e-g(a)>t&&(f=!1),f}function p(a,t){var e=t-g(a);return e}function v(a,t){t.css({display:"block"}),a.trigger("maxlength.shown")}function k(a,t){l.alwaysShow||(t.css({display:"none"}),a.trigger("maxlength.hidden"))}function m(a,t,e){var f="";return l.message?typeof l.message=="function"?f=l.message(a,t):f=l.message.replace("%charsTyped%",e).replace("%charsRemaining%",t-e).replace("%charsTotal%",t):(l.preText&&(f+=l.preText),l.showCharsTyped?f+=e:f+=t-e,l.showMaxLength&&(f+=l.separator+t),l.postText&&(f+=l.postText)),f}function b(a,t,e,f){f&&(f.html(m(t.val(),e,e-a)),a>0?x(t,l.threshold,e)?v(t,f.removeClass(l.limitReachedClass).addClass(l.warningClass)):k(t,f):v(t,f.removeClass(l.warningClass).addClass(l.limitReachedClass))),l.customMaxAttribute&&(a<0?t.addClass("overmax"):t.removeClass("overmax"))}function M(a){var t=a[0];return i.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},a.offset())}function R(a,t){if(!(!a||!t)){var e=["top","bottom","left","right","position"],f={};i.each(e,function(s,n){var r=l.placement[n];typeof r<"u"&&(f[n]=r)}),t.css(f)}}function c(a,t){var e=M(a);if(i.type(l.placement)==="function"){l.placement(a,t,e);return}if(i.isPlainObject(l.placement)){R(l.placement,t);return}var f=a.outerWidth(),s=t.outerWidth(),n=t.width(),r=t.height();switch(l.appendToParent&&(e.top-=a.parent().offset().top,e.left-=a.parent().offset().left),l.placement){case"bottom":t.css({top:e.top+e.height,left:e.left+e.width/2-n/2});break;case"top":t.css({top:e.top-r,left:e.left+e.width/2-n/2});break;case"left":t.css({top:e.top+e.height/2-r/2,left:e.left-n});break;case"right":t.css({top:e.top+e.height/2-r/2,left:e.left+e.width});break;case"bottom-right":t.css({top:e.top+e.height,left:e.left+e.width});break;case"top-right":t.css({top:e.top-r,left:e.left+f});break;case"top-left":t.css({top:e.top-r,left:e.left-s});break;case"bottom-left":t.css({top:e.top+a.outerHeight(),left:e.left-s});break;case"centered-right":t.css({top:e.top+r/2,left:e.left+f-s-3});break;case"bottom-right-inside":t.css({top:e.top+e.height,left:e.left+e.width-s});break;case"top-right-inside":t.css({top:e.top-r,left:e.left+f-s});break;case"top-left-inside":t.css({top:e.top-r,left:e.left});break;case"bottom-left-inside":t.css({top:e.top+a.outerHeight(),left:e.left});break}}function T(){return l.placement==="bottom-right-inside"||l.placement==="top-right-inside"||typeof l.placement=="function"||l.message&&typeof l.message=="function"}function h(a){var t=a.attr("maxlength")||l.customMaxAttribute;if(l.customMaxAttribute&&!l.allowOverMax){var e=a.attr(l.customMaxAttribute);(!t||e<t)&&(t=e)}return t||(t=a.attr("size")),t}return this.each(function(){var a=i(this),t,e;i(window).resize(function(){e&&c(a,e)});function f(){var s=m(a.val(),t,"0");t=h(a),e||(e=i('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:l.zIndex}).html(s)),a.is("textarea")&&(a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight()),a.mouseup(function(){(a.outerWidth()!==a.data("maxlenghtsizex")||a.outerHeight()!==a.data("maxlenghtsizey"))&&c(a,e),a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight())})),l.appendToParent?(a.parent().append(e),a.parent().css("position","relative")):w.append(e);var n=p(a,h(a));b(n,a,t,e),c(a,e)}l.showOnReady?a.ready(function(){f()}):a.focus(function(){f()}),a.on("maxlength.reposition",function(){c(a,e)}),a.on("destroyed",function(){e&&e.remove()}),a.on("blur",function(){e&&!l.showOnReady&&e.remove()}),a.on("input",function(){var s=h(a),n=p(a,s),r=!0;return l.validate&&n<0?(C(a,s),r=!1):b(n,a,t,e),T()&&c(a,e),r})})}})})(jQuery);
