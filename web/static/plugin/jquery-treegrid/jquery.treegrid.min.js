(function(t){var s={initTree:function(e){var r=t.extend({},this.treegrid.defaults,e);return this.each(function(){var i=t(this);i.treegrid("setTreeContainer",t(this)),i.treegrid("setSettings",r),r.getRootNodes.apply(this,[t(this)]).treegrid("initNode",r)})},initNode:function(e){return this.each(function(){var r=t(this);r.treegrid("setTreeContainer",e.getTreeGridContainer.apply(this)),r.treegrid("getChildNodes").treegrid("initNode",e),r.treegrid("initExpander").treegrid("initIndent").treegrid("initEvents").treegrid("initState").treegrid("initSettingsEvents")})},initEvents:function(){var e=t(this);return e.on("change",function(){var r=t(this);r.treegrid("render"),r.treegrid("getSetting","saveState")&&r.treegrid("saveState")}),e.on("collapse",function(){var r=t(this);r.removeClass("treegrid-expanded"),r.addClass("treegrid-collapsed")}),e.on("expand",function(){var r=t(this);r.removeClass("treegrid-collapsed"),r.addClass("treegrid-expanded")}),e},initSettingsEvents:function(){var e=t(this);return e.on("change",function(){var r=t(this);typeof r.treegrid("getSetting","onChange")=="function"&&r.treegrid("getSetting","onChange").apply(r)}),e.on("collapse",function(){var r=t(this);typeof r.treegrid("getSetting","onCollapse")=="function"&&r.treegrid("getSetting","onCollapse").apply(r)}),e.on("expand",function(){var r=t(this);typeof r.treegrid("getSetting","onExpand")=="function"&&r.treegrid("getSetting","onExpand").apply(r)}),e},initExpander:function(){var e=t(this),r=e.find("td").get(e.treegrid("getSetting","treeColumn")),i=e.treegrid("getSetting","expanderTemplate"),n=e.treegrid("getSetting","getExpander").apply(this);return n&&n.remove(),t(i).prependTo(r).click(function(){t(t(this).closest("tr")).treegrid("toggle")}),e},initIndent:function(){var e=t(this);e.find(".treegrid-indent").remove();for(var r=0;r<t(this).treegrid("getDepth");r++)t(e.treegrid("getSetting","indentTemplate")).insertBefore(e.find(".treegrid-expander"));return e},initState:function(){var e=t(this);return e.treegrid("getSetting","saveState")&&!e.treegrid("isFirstInit")?e.treegrid("restoreState"):e.treegrid("getSetting","initialState")==="expanded"?e.treegrid("expand"):e.treegrid("collapse"),e},isFirstInit:function(){var e=t(this).treegrid("getTreeContainer");return e.data("first_init")===void 0&&e.data("first_init",t.cookie(e.treegrid("getSetting","saveStateName"))===void 0),e.data("first_init")},saveState:function(){var e=t(this);if(e.treegrid("getSetting","saveStateMethod")==="cookie"){var r=t.cookie(e.treegrid("getSetting","saveStateName"))||"",i=r===""?[]:r.split(","),n=e.treegrid("getNodeId");e.treegrid("isExpanded")?t.inArray(n,i)===-1&&i.push(n):e.treegrid("isCollapsed")&&t.inArray(n,i)!==-1&&i.splice(t.inArray(n,i),1),t.cookie(e.treegrid("getSetting","saveStateName"),i.join(","))}return e},restoreState:function(){var e=t(this);if(e.treegrid("getSetting","saveStateMethod")==="cookie"){var r=t.cookie(e.treegrid("getSetting","saveStateName")).split(",");t.inArray(e.treegrid("getNodeId"),r)!==-1?e.treegrid("expand"):e.treegrid("collapse")}return e},getSetting:function(e){return t(this).treegrid("getTreeContainer")?t(this).treegrid("getTreeContainer").data("settings")[e]:null},setSettings:function(e){t(this).treegrid("getTreeContainer").data("settings",e)},getTreeContainer:function(){return t(this).data("treegrid")},setTreeContainer:function(e){return t(this).data("treegrid",e)},getRootNodes:function(){return t(this).treegrid("getSetting","getRootNodes").apply(this,[t(this).treegrid("getTreeContainer")])},getAllNodes:function(){return t(this).treegrid("getSetting","getAllNodes").apply(this,[t(this).treegrid("getTreeContainer")])},isNode:function(){return t(this).treegrid("getNodeId")!==null},getNodeId:function(){return t(this).treegrid("getSetting","getNodeId")===null?null:t(this).treegrid("getSetting","getNodeId").apply(this)},getParentNodeId:function(){return t(this).treegrid("getSetting","getParentNodeId").apply(this)},getParentNode:function(){return t(this).treegrid("getParentNodeId")===null?null:t(this).treegrid("getSetting","getNodeById").apply(this,[t(this).treegrid("getParentNodeId"),t(this).treegrid("getTreeContainer")])},getChildNodes:function(){return t(this).treegrid("getSetting","getChildNodes").apply(this,[t(this).treegrid("getNodeId"),t(this).treegrid("getTreeContainer")])},getDepth:function(){return t(this).treegrid("getParentNode")===null?0:t(this).treegrid("getParentNode").treegrid("getDepth")+1},isRoot:function(){return t(this).treegrid("getDepth")===0},isLeaf:function(){return t(this).treegrid("getChildNodes").length===0},isLast:function(){if(t(this).treegrid("isNode")){var e=t(this).treegrid("getParentNode");if(e===null){if(t(this).treegrid("getNodeId")===t(this).treegrid("getRootNodes").last().treegrid("getNodeId"))return!0}else if(t(this).treegrid("getNodeId")===e.treegrid("getChildNodes").last().treegrid("getNodeId"))return!0}return!1},isFirst:function(){if(t(this).treegrid("isNode")){var e=t(this).treegrid("getParentNode");if(e===null){if(t(this).treegrid("getNodeId")===t(this).treegrid("getRootNodes").first().treegrid("getNodeId"))return!0}else if(t(this).treegrid("getNodeId")===e.treegrid("getChildNodes").first().treegrid("getNodeId"))return!0}return!1},isExpanded:function(){return t(this).hasClass("treegrid-expanded")},isCollapsed:function(){return t(this).hasClass("treegrid-collapsed")},isOneOfParentsCollapsed:function(){var e=t(this);return e.treegrid("isRoot")?!1:e.treegrid("getParentNode").treegrid("isCollapsed")?!0:e.treegrid("getParentNode").treegrid("isOneOfParentsCollapsed")},expand:function(){return t(this).each(function(){var e=t(this);!e.treegrid("isLeaf")&&!e.treegrid("isExpanded")&&(e.trigger("expand"),e.trigger("change"))})},expandAll:function(){var e=t(this);return e.treegrid("getRootNodes").treegrid("expandRecursive"),e},expandRecursive:function(){return t(this).each(function(){var e=t(this);e.treegrid("expand"),e.treegrid("isLeaf")||e.treegrid("getChildNodes").treegrid("expandRecursive")})},collapse:function(){return t(this).each(function(){var e=t(this);!e.treegrid("isLeaf")&&!e.treegrid("isCollapsed")&&(e.trigger("collapse"),e.trigger("change"))})},collapseAll:function(){var e=t(this);return e.treegrid("getRootNodes").treegrid("collapseRecursive"),e},collapseRecursive:function(){return t(this).each(function(){var e=t(this);e.treegrid("collapse"),e.treegrid("isLeaf")||e.treegrid("getChildNodes").treegrid("collapseRecursive")})},toggle:function(){var e=t(this);return e.treegrid("isExpanded")?e.treegrid("collapse"):e.treegrid("expand"),e},render:function(){return t(this).each(function(){var e=t(this);e.treegrid("isOneOfParentsCollapsed")?e.hide():e.show(),e.treegrid("isLeaf")||(e.treegrid("renderExpander"),e.treegrid("getChildNodes").treegrid("render"))})},renderExpander:function(){return t(this).each(function(){var e=t(this),r=e.treegrid("getSetting","getExpander").apply(this);r?e.treegrid("isCollapsed")?(r.removeClass(e.treegrid("getSetting","expanderExpandedClass")),r.addClass(e.treegrid("getSetting","expanderCollapsedClass"))):(r.removeClass(e.treegrid("getSetting","expanderCollapsedClass")),r.addClass(e.treegrid("getSetting","expanderExpandedClass"))):(e.treegrid("initExpander"),e.treegrid("renderExpander"))})}};t.fn.treegrid=function(e){if(s[e])return s[e].apply(this,Array.prototype.slice.call(arguments,1));if(typeof e=="object"||!e)return s.initTree.apply(this,arguments);t.error("Method with name "+e+" does not exists for jQuery.treegrid")},t.fn.treegrid.defaults={initialState:"expanded",saveState:!1,saveStateMethod:"cookie",saveStateName:"tree-grid-state",expanderTemplate:'<span class="treegrid-expander"></span>',indentTemplate:'<span class="treegrid-indent"></span>',expanderExpandedClass:"mdi mdi-menu-down",expanderCollapsedClass:"mdi mdi-menu-right",treeColumn:0,getExpander:function(){return t(this).find(".treegrid-expander")},getNodeId:function(){var e=/treegrid-([A-Za-z0-9_-]+)/;return e.test(t(this).attr("class"))?e.exec(t(this).attr("class"))[1]:null},getParentNodeId:function(){var e=/treegrid-parent-([A-Za-z0-9_-]+)/;return e.test(t(this).attr("class"))?e.exec(t(this).attr("class"))[1]:null},getNodeById:function(e,r){var i="treegrid-"+e;return r.find("tr."+i)},getChildNodes:function(e,r){var i="treegrid-parent-"+e;return r.find("tr."+i)},getTreeGridContainer:function(){return t(this).closest("table")},getRootNodes:function(e){var r=t.grep(e.find("tr"),function(i){var n=t(i).attr("class"),d=/treegrid-([A-Za-z0-9_-]+)/,a=/treegrid-parent-([A-Za-z0-9_-]+)/;return d.test(n)&&!a.test(n)});return t(r)},getAllNodes:function(e){var r=t.grep(e.find("tr"),function(i){var n=t(i).attr("class"),d=/treegrid-([A-Za-z0-9_-]+)/;return d.test(n)});return t(r)},onCollapse:null,onExpand:null,onChange:null}})(jQuery);
